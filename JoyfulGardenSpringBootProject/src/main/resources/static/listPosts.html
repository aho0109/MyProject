<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>個人紀錄</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/postAndReplies.css">

</head>

<body>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!------ Include the above in your HEAD tag ---------->

    <div id="app">
    
        <section id="tabs" class="project-tab">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <nav>
                            <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist">
                                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home"
                                    role="tab" aria-controls="nav-home" aria-selected="true">你的文章</a>
                                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile"
                                    role="tab" aria-controls="nav-profile" aria-selected="false">你的回覆</a>
                                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact"
                                    role="tab" aria-controls="nav-contact" aria-selected="false">你的留言</a>
                            </div>
                        </nav>
                        <div class="tab-content" id="nav-tabContent">
    
                            <div class="tab-pane fade show active" id="nav-home" role="tabpanel"
                                aria-labelledby="nav-home-tab">
    
                                <table class="table" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>文章標題</th>
                                            <th>發表時間</th>
                                            <th>(人氣)</th>
                                        </tr>
                                    </thead>
    
                                    <tbody>
                                        <tr v-for="post in posts" :key="post.postID">
                                            <td><a style="font-size: 25px; text-decoration: none;"
                                                v-bind:href="'postAndReplies-google.html?postID=' + post.postID">{{ post.postTitle
                                                }}</a></td>
                                            <td>時間</td>
                                            <td>(人數)</td>
                                        </tr>
                                    </tbody>
                                </table>
    
                            </div>
    
    
                            <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                                <table class="table" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>回覆標題</th>
                                            <th>發表時間</th>
                                            <th>(人氣)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><a href="#">post.postTitle</a></td>
                                            <td>時間</td>
                                            <td>(人數)</td>
                                        </tr>
    
                                    </tbody>
                                </table>
                            </div>
    
    
                            <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                                <table class="table" cellspacing="0">
                                    <thead>
                                        <tr>
                                            <th>Contest Name</th>
                                            <th>Date</th>
                                            <th>Award Position</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><a href="#">Work 1</a></td>
                                            <td>Doe</td>
                                            <td>john@example.com</td>
                                        </tr>
                                        <tr>
                                            <td><a href="#">Work 2</a></td>
                                            <td>Moe</td>
                                            <td>mary@example.com</td>
                                        </tr>
                                        <tr>
                                            <td><a href="#">Work 3</a></td>
                                            <td>Dooley</td>
                                            <td>july@example.com</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
    
    
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@3.2.43/dist/vue.global.min.js"></script>

    <script>
        const app = Vue.createApp({
            data() {
                return {
                    posts: [],
                };
            },
            mounted() {
                const authorNickname = getUrlParameter("authorNickname");
                axios.get(`http://localhost:8085/forum/postsDesc/${authorNickname}`)
                    .then(response => {
                        console.log('response:', response);
                        this.posts = response.data;
                    })
                    .catch(error => {
                        console.error('Error fetching posts:', error);
                    });
            },
            methods: {
                /*getCookieValue(cookieName) {
                    // 獲取所有的 Cookie (所謂一個是: sessionNickname=Yoro)
                    var cookies = document.cookie.split(';');
                    // 遍歷每個 Cookie
                    for (var i = 0; i < cookies.length; i++) {
                        var cookie = cookies[i].trim();
                        // 如果找到了目標名稱的 Cookie 
                        if (cookie.startsWith(cookieName + '=')) {
                            return cookie.substring(cookieName.length + 1);// 提取並返回該 Cookie 的值
                        }
                    }
                    return '';// 如果未找到對應的 Cookie，返回空字符串或者其他指定的值
                }*/
            }
        });

        app.mount("#app");

        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }


    </script>


</body>

</html>